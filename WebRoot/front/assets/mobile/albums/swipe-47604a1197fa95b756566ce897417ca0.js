!function(){function t(t,e){if(this.el="string"==typeof t?document.querySelector(t):t,this.slides=this.el.querySelectorAll("li"),this.isVertical="vertical"==e.dir?!0:!1,this.cur=e.cur,this.success=e.success||function(){},!(this.slides.length<2)){if(!this.el)throw Error("element is not defined..");this.init()}}var e={addEvent:function(t,e,i,n){t.addEventListener(e,i,!!n)},removeEvent:function(t,e,i,n){t.removeEventListener(e,i,!!n)},winW:$(window).width(),winH:$(window).height(),noop:function(){}},i=window.Modernizr&&Modernizr.touch===!0||function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}(),n={start:i?"touchstart":"mousedown",move:i?"touchmove":"mousemove",end:i?"touchend":"mouseup"};t.prototype={init:function(){$(this.slides[this.cur]).addClass("cur"),e.addEvent(this.el,n.start,this),this.success.call(this.el)},start:function(t){if("A"!=t.target.tagName){if(this.moveing)return t.preventDefault(),!1;var s=i?t.touches[0]:t;this.data={startX:s.pageX,startY:s.pageY,distX:0,distY:0,time:+new Date},e.addEvent(this.el,n.move,this),e.addEvent(this.el,n.end,this)}},move:function(t){var n=i?t.touches[0]:t,s=this.data;s.distX=n.pageX-s.startX,s.distY=n.pageY-s.startY,this.translate(this.isVertical?s.distY:s.distX,this.isVertical?e.winH:e.winW),t.preventDefault()},end:function(){this.animate(),e.removeEvent(this.el,n.move,this),e.removeEvent(this.el,n.end,this)},reset:function(){console.log("reset")},animate:function(){var t=this,i=this.data,n=+new Date-i.time;curObj=$(this.slides[this.cur]),nextObj=$(this.nextSlide),isRevert=50>n||Math.abs(this.getDisValue(i.distX,i.distY))<60,$(this.nextSlide).addClass("animated"),curObj.addClass("animated"),this.isVertical?this.translate((i.distY>0?1:-1)*e.winH,e.winH,isRevert):this.translate((i.distX>0?1:-1)*e.winW,e.winW,isRevert),this.moveing=!0,setTimeout(function(){isRevert||(t.cur=t.nextIndex),t.moveing=!1,(isRevert?curObj:nextObj).removeAttr("style").attr("class","cur").siblings().removeAttr("style").removeAttr("class")},300)},getDisValue:function(t,e){return this.isVertical?e:t},translate:function(t,e,i){var n=this.isVertical,s=this.slides.length,r=0>t?1:-1,a=function(s){var a=s||r*e+(i?0:t);return n?"0, "+a+"px":a+"px, 0"},o=this.cur+r,l=i?1:(1-Math.abs(.2*t/e)).toFixed(6),c=a((-r*e*(1-l)/2).toFixed(6));0>o&&(o+=s),o>s-1&&(o=0),this.nextIndex=o,this.nextSlide=this.slides[o],$(this.slides[o]).addClass("action").siblings().removeClass("action"),this.nextSlide.style.webkitTransform="translate("+a()+")",this.slides[this.cur].style.webkitTransform="translate("+c+") scale("+l+")"},handleEvent:function(t){switch(t.type){case"touchstart":case"mousedown":this.start(t);break;case"touchmove":case"mousemove":this.move(t);break;case"touchend":case"mouseup":this.end(t)}}},$.fn.swipe=function(e){var i={cur:0,dir:"vertical"};return this.each(function(){return $(this).data("swipe",new t(this,$.extend(i,e))),this})}}();